(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["locker"],{7220:function(e,t,l){"use strict";l.r(t);var c=l("7a23"),o=l("5779"),a=l("8d7e"),n=l("bb0f"),r=(l("c3fe"),l("c1df")),s=l.n(r),d=l("5502"),i=l("a7d4");const b=e=>(Object(c["pushScopeId"])("data-v-68cfda79"),e=e(),Object(c["popScopeId"])(),e),u={class:"modal-body"},m={class:"my-2"},j=b(()=>Object(c["createElementVNode"])("label",{class:"form-label",for:"document_type"},"Title *",-1)),O={for:"dropzoneFile",role:"button"},p={class:"text-center"},v=b(()=>Object(c["createElementVNode"])("h4",{class:"btn btn-primary"},"Select More",-1)),f=b(()=>Object(c["createElementVNode"])("input",{type:"file",id:"dropzoneFile",multiple:"",class:"dropzoneFile"},null,-1)),h=b(()=>Object(c["createElementVNode"])("input",{type:"file",id:"dropzoneFile",multiple:"",class:"dropzoneFile",accept:".pdf"},null,-1)),N={class:"p-50"},V={class:"d-flex align-items-center"},E={class:"col ps-0"},g={class:"mb-0","data-dz-size":""},w={class:"col-auto"},k=["onClick"],y={key:2,class:"text-danger small",for:"error"},x={key:3,class:"text-primary"},D={class:"modal-footer"},C=["disabled"],S={class:"spinner-border spinner-border-sm"};var z={__name:"UploadDocument",emits:["close"],setup(e,{emit:t}){const l=Object(c["ref"])(!1),o=Object(c["ref"])(""),a=Object(c["ref"])([]),n=Object(c["ref"])([]);n.value=[],a.value=[];const r=Object(c["ref"])(!1),s=Object(c["ref"])(null),b=Object(c["ref"])(!1),z=Object(c["ref"])(!1),T=Object(d["g"])();let B=Object(c["ref"])("");const _=Object(c["ref"])(!0),M=Object(c["ref"])({file:null}),F=Object(c["ref"])({title:"",files:[]}),L=e=>{for(let t=0;t<e.length;t++){if(e[t].size>2097152)return M.value.file="File is too big!",F.value.title="",_.value=!0,!1;{let l=new FileReader;const c=e[t];l.onloadend=()=>{F.value.files.push(l.result),F.value.title&&F.value.title.trim()||(F.value.title=c.name.split(".").slice(0,-1).join(".")),a.value.push(c.name)},l.readAsDataURL(c)}}b.value=!0},U=e=>{z.value=!0;let t=o.value=e.dataTransfer.files;L(t),(!F.value.title||!F.value.title.trim())&&(F.value.title=o.value[0].name.split(".").slice(0,-1).join("."))},P=e=>{let t=o.value=e.target.files;L(t),b.value=!0,z.value=!0,B=e.target.files},A=e=>{a.value.splice(e,1),F.value.files.splice(e,1),n.value.splice(e,1),0==a.value.length&&(F.value.files=[],n.value=[],a.value=[],F.value.title="",b.value=!1)},Y=()=>{F.value.files&&0!==F.value.files.length?(M.value.file=null,_.value=!1):(M.value.file="Please upload your document",_.value=!0),M.value.title||M.value.file||(r.value=!0,T.dispatch("locker/uploadDocument",{...F.value}).then(e=>{r.value=!1,t("close")}))};return(e,t)=>{var o;return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",u,[Object(c["createElementVNode"])("div",m,[j,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control",id:"document_type",placeholder:"Enter document title",style:Object(c["normalizeStyle"])(M.value.title&&"border: 1px solid red"),"onUpdate:modelValue":t[0]||(t[0]=e=>F.value.title=e),onChange:t[1]||(t[1]=e=>M.value.title=null)},null,36),[[c["vModelText"],F.value.title]])]),(null===(o=F.value)||void 0===o?void 0:o.files.length)>0?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:0,onChange:P},[Object(c["createElementVNode"])("div",{onDragenter:t[2]||(t[2]=Object(c["withModifiers"])((...t)=>e.toggleActive&&e.toggleActive(...t),["prevent"])),onDragleave:t[3]||(t[3]=Object(c["withModifiers"])((...t)=>e.toggleActive&&e.toggleActive(...t),["prevent"])),onDragover:t[4]||(t[4]=Object(c["withModifiers"])(()=>{},["prevent"])),onDrop:t[5]||(t[5]=Object(c["withModifiers"])((...t)=>e.toggleActive&&e.toggleActive(...t),["prevent"])),class:Object(c["normalizeClass"])([{"active-dropzone":l.value},"dropzone h-auto border border-0 d-block"])},[Object(c["createElementVNode"])("label",O,[Object(c["createElementVNode"])("div",p,[v,Object(c["renderSlot"])(e.$slots,"input",{},()=>[f])])])],34)],32)):(Object(c["openBlock"])(),Object(c["createBlock"])(i["a"],{key:1,onDrop:Object(c["withModifiers"])(U,["prevent"]),onChange:P},{format:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Upload PDF only ")]),input:Object(c["withCtx"])(()=>[h]),_:1},8,["onDrop"])),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(a.value,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"card mb-1 mt-50 shadow-none border d-flex",key:t},[Object(c["createElementVNode"])("div",N,[Object(c["createElementVNode"])("div",V,[Object(c["createElementVNode"])("div",E,[Object(c["createElementVNode"])("p",g,Object(c["toDisplayString"])(e),1)]),Object(c["createElementVNode"])("div",w,[Object(c["createElementVNode"])("a",{role:"button",class:"btn mb-0 btn-sm btn-outline-danger ds-remove filed","data-id":"#document_id","data-name":"fileName",onClick:e=>A(t)}," X ",8,k)])])])]))),128)),M.value.file?(Object(c["openBlock"])(),Object(c["createElementBlock"])("label",y,Object(c["toDisplayString"])(M.value.file),1)):Object(c["createCommentVNode"])("",!0),s.value?(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",x,Object(c["toDisplayString"])(s.value),1)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",D,[Object(c["createElementVNode"])("button",{disabled:r.value,onClick:Y,type:"button",class:"btn btn-primary"},[Object(c["withDirectives"])(Object(c["createElementVNode"])("span",S,null,512),[[c["vShow"],r.value]]),Object(c["createTextVNode"])(" Upload ")],8,C)])])}}},T=(l("cfe9"),l("6b0d")),B=l.n(T);const _=B()(z,[["__scopeId","data-v-68cfda79"]]);var M=_,F=(l("e828"),l("2541"),l("b079")),L=l("1157"),U=l.n(L),P=l("6150"),A=l("4c35");const Y={class:"container-fluid"},I={class:"row p-0",id:"basic-table "},R={class:"col-12"},$={class:"card"},J={class:"card-header d-flex justify-content-between"},q=Object(c["createElementVNode"])("h4",{class:"card-title"},"Locker Documents",-1),W={class:"wrap"},X=Object(c["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-plus"},[Object(c["createElementVNode"])("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),Object(c["createElementVNode"])("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),Z=Object(c["createElementVNode"])("span",null,"Upload Document",-1),G=[X,Z],H={class:"card-body py-4"},K={class:"table-responsive"},Q={class:"table table-hover",id:"allrecord"},ee=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",null,"S/N"),Object(c["createElementVNode"])("th",null,"Document Title"),Object(c["createElementVNode"])("th",null,"Time"),Object(c["createElementVNode"])("th",null,"Status"),Object(c["createElementVNode"])("th",null,"Actions")])],-1),te={class:"user-name text-truncate mb-0",style:{width:"300px"}},le={class:"d-flex flex-column"},ce={class:"user-name text-truncate mb-0"},oe={class:"dropdown"},ae={class:"btn btn-sm btn-icon dropdown-toggle hide-arrow","data-bs-toggle":"dropdown","aria-expanded":"false"},ne={class:"dropdown-menu dropdown-menu-end"},re=["onClick"],se=["onClick"],de={class:"dropdown-item"},ie=Object(c["createElementVNode"])("h4",{class:"mb-0"}," Upload Locker Document ",-1),be={class:"text-danger mb-0"},ue=Object(c["createElementVNode"])("p",{class:"text-center my-2"},"Are you sure you want to cancel this Document?",-1),me=Object(c["createElementVNode"])("h4",{class:"text-primary mb-0"}," Share with others ",-1),je=["disabled"],Oe={class:"spinner-border spinner-border-sm"},pe=Object(c["createElementVNode"])("h4",{class:"text-primary mb-0"}," Enter OTP ",-1),ve={class:"text-center my-2"},fe={class:"text-primary text-bold"},he=Object(c["createElementVNode"])("br",null,null,-1),Ne=["disabled"],Ve={class:"spinner-border spinner-border-sm"};var Ee={__name:"locker",setup(e){const t=Object(F["useToast"])(),l=Object(d["g"])(),r=(s()().format("YYYY-MM-DD"),Object(c["computed"])(()=>l.state.ProfileModule.userProfile)),i=e=>s()(e).format("Do MMM YYYY Â· h:mm a"),{allLockerDocuments:b,postLockerDocument:u}=(Object(P["b"])(),Object(a["c"])({allLockerDocuments:"locker/allLockerDocuments",postLockerDocument:"locker/postLockerDocument"})),{getLockerDocuments:m,deleteDocument:j,getUser:O}=Object(a["b"])({getLockerDocuments:"locker/getLockerDocuments",deleteDocument:"locker/deleteDocument",getUser:"ProfileModule/getUser"}),p=(Object(c["ref"])(""),Object(c["ref"])("")),v={email:"",otp:""},f=Object(c["ref"])(""),h=Object(c["ref"])(!1),N=Object(c["ref"])(!1),V=Object(c["ref"])(r.value.access_locker_documents),E=Object(c["ref"])(!1),g=Object(c["ref"])(""),w=Object(c["ref"])(""),k=Object(c["ref"])(!1),y=()=>{E.value=!0},x=e=>{w.value=e,h.value=!0},D=e=>{g.value=e,N.value=!0},C=e=>{if(e){let e={id:w.value};j(e),h.value=!1}else h.value=!1},S=e=>{if(e){w.value;let e=[{document_id:g.value,email:p.value}];k.value=!0,A["a"].put("/document-share/"+g.value,{documents:e}).then(e=>{N.value=!1,k.value=!1,t.success("shared successfully",{timeout:5e3,position:"top-right"})}).catch(e=>{N.value=!1,k.value=!1,t.error(e.message,{timeout:5e3,position:"top-right"})})}else N.value=!1},z=e=>{if(e){let e={email:r.value.email,otp:""+f.value};k.value=!0,A["a"].post("/document-otp-locker",e).then(e=>{V.value=!0,O(),k.value=!1,t.success("updated successfully",{timeout:5e3,position:"top-right"})}).catch(e=>{k.value=!1,t.error(e.response.data.data.error,{timeout:5e3,position:"top-right"})})}else V.value=!1},T=e=>{e&&A["a"].get("/document-otp-locker").then(e=>{var l;t.success(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.message,{timeout:5e3,position:"top-right"})}).catch(e=>{t.error(e.message)})};Object(c["ref"])({});return Object(c["onMounted"])(()=>{var e;m(),!1===(null===(e=r.value)||void 0===e?void 0:e.access_locker_documents)&&A["a"].get("/document-otp-locker").then(e=>{var l;t.success(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.message,{timeout:5e3,position:"top-right"})}).catch(e=>{t.error(e.message)})}),Object(c["onUpdated"])(()=>{setTimeout(()=>{U.a.fn.dataTable.isDataTable("#allrecord")?U()("#allrecord").DataTable():b.value.length>0&&U()("#allrecord").DataTable({columnDefs:[{orderable:!1,targets:[0,4]}],order:[[3,"desc"]],aaSorting:[],lengthMenu:[[5,10,25,50,-1],[5,10,25,50,"All"]],pageLength:5})},100)}),(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Y,[Object(c["createElementVNode"])("div",I,[Object(c["createElementVNode"])("div",R,[Object(c["createElementVNode"])("div",$,[Object(c["createElementVNode"])("div",J,[q,Object(c["createElementVNode"])("div",W,[Object(c["createElementVNode"])("span",{onClick:t[0]||(t[0]=e=>y()),class:"btn btn-primary waves-effect"},G)])]),Object(c["createElementVNode"])("div",H,[Object(c["createElementVNode"])("div",K,[Object(c["createElementVNode"])("table",Q,[ee,Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(Object(c["unref"])(b).filter(e=>"Locked"==e.status),(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:t},[Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(++t),1),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("h6",te,Object(c["toDisplayString"])(e.title),1)]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",le,[Object(c["createElementVNode"])("h6",ce,Object(c["toDisplayString"])(i(e.created_at)),1)])]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("span",{class:Object(c["normalizeClass"])(["badge rounded-pill me-1",["Pending"==e.status?"bg-warning":"bg-success"]])},Object(c["toDisplayString"])(e.status),3)]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",oe,[Object(c["createElementVNode"])("a",ae,[Object(c["createVNode"])(Object(c["unref"])(o["a"]),{icon:"oi:ellipses",rotate:1,verticalFlip:!0})]),Object(c["createElementVNode"])("div",ne,[Object(c["createElementVNode"])("div",{onClick:t=>x(e.id),class:"dropdown-item"},[Object(c["createVNode"])(Object(c["unref"])(o["a"]),{icon:"mdi:cancel"}),Object(c["createTextVNode"])(" Delete ")],8,re),Object(c["createElementVNode"])("div",{class:"dropdown-item",onClick:t=>D(e.id)},[Object(c["createVNode"])(Object(c["unref"])(o["a"]),{icon:"carbon:share"}),Object(c["createTextVNode"])(" Share ")],8,se),Object(c["createElementVNode"])("div",de,[Object(c["createVNode"])(Object(c["unref"])(o["a"]),{icon:"carbon:download"}),Object(c["createTextVNode"])(" Download ")])])])])]))),128))])])])])])])]),Object(c["createVNode"])(n["a"],{show:E.value,size:e.modal-e.sm,footer:!1,closeBtn:!0,onClose:t[2]||(t[2]=e=>E.value=!1)},{header:Object(c["withCtx"])(()=>[ie]),body:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(M),{onClose:t[1]||(t[1]=e=>E.value=!1)})]),_:1},8,["show","size"]),Object(c["createVNode"])(n["a"],{show:h.value,size:"modal-sm",onClose:t[5]||(t[5]=e=>h.value=!1)},{header:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("h4",be,[Object(c["createVNode"])(Object(c["unref"])(o["a"]),{icon:"eva:alert-triangle-outline",style:{"margin-bottom":"3px"}}),Object(c["createTextVNode"])(" Alert ")])]),body:Object(c["withCtx"])(()=>[ue]),footer:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("button",{class:"btn btn-sm btn-secondary",onClick:t[3]||(t[3]=e=>C(!1))}," No "),Object(c["createElementVNode"])("button",{class:"btn btn-sm btn-primary",onClick:t[4]||(t[4]=e=>C(!0))}," Yes ")]),_:1},8,["show"]),Object(c["createVNode"])(n["a"],{show:N.value,size:"modal-sm",onClose:t[10]||(t[10]=e=>N.value=!1)},{header:Object(c["withCtx"])(()=>[me]),body:Object(c["withCtx"])(()=>[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"email",class:"form-control",id:"email",placeholder:"Please Enter email",style:Object(c["normalizeStyle"])(v.email&&"border: 1px solid red"),"onUpdate:modelValue":t[6]||(t[6]=e=>p.value=e),onChange:t[7]||(t[7]=e=>v.email=null)},null,36),[[c["vModelText"],p.value]])]),footer:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("button",{class:"btn btn-sm btn-secondary",onClick:t[8]||(t[8]=e=>C(!1))}," cancel "),Object(c["createElementVNode"])("button",{disabled:k.value,class:"btn btn-sm btn-primary",onClick:t[9]||(t[9]=e=>S(!0))},[Object(c["withDirectives"])(Object(c["createElementVNode"])("span",Oe,null,512),[[c["vShow"],k.value]]),Object(c["createTextVNode"])(" Share ")],8,je)]),_:1},8,["show"]),Object(c["createElementVNode"])("div",null,[Object(c["createVNode"])(n["a"],{show:0==V.value,size:"modal-sm",onClose:t[15]||(t[15]=e=>V.value=!1)},{header:Object(c["withCtx"])(()=>[pe]),body:Object(c["withCtx"])(()=>{var e;return[Object(c["createElementVNode"])("a",ve,[Object(c["createTextVNode"])("We have sent an OTP to "),Object(c["createElementVNode"])("span",fe,Object(c["toDisplayString"])(null===(e=Object(c["unref"])(r))||void 0===e?void 0:e.email),1),Object(c["createTextVNode"])(),he,Object(c["createTextVNode"])(" If you don't get a code, please request another ")]),Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("p",{onClick:t[11]||(t[11]=e=>T(!0)),class:"text-primary text-right mt-1 mb-0"},"Resend")]),Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"number",class:"form-control",id:"otp",placeholder:"Please Enter Otp",style:Object(c["normalizeStyle"])(v.otp&&"border: 1px solid red"),"onUpdate:modelValue":t[12]||(t[12]=e=>f.value=e),onChange:t[13]||(t[13]=e=>v.otp=null)},null,36),[[c["vModelText"],f.value]])]}),footer:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("button",{disabled:k.value,class:"btn btn-sm btn-primary",onClick:t[14]||(t[14]=e=>z(!0))},[Object(c["withDirectives"])(Object(c["createElementVNode"])("span",Ve,null,512),[[c["vShow"],k.value]]),Object(c["createTextVNode"])(" Proceed ")],8,Ne)]),_:1},8,["show"])])]))}};l("bcea");const ge=Ee;t["default"]=ge},"8b61":function(e,t,l){"use strict";l("e356")},a7d4:function(e,t,l){"use strict";var c=l("7a23");const o=e=>(Object(c["pushScopeId"])("data-v-40716f28"),e=e(),Object(c["popScopeId"])(),e),a={class:"w-100"},n=["onDragenter","onDragleave","onDrop"],r={for:"dropzoneFile",class:"custom-upload",role:"button"},s={class:"text-center"},d=o(()=>Object(c["createElementVNode"])("h4",null,"Drag and drop to upload",-1)),i=o(()=>Object(c["createElementVNode"])("h4",null,"OR",-1)),b=o(()=>Object(c["createElementVNode"])("h4",{class:"btn btn-primary"},"Select File",-1)),u={class:"text-muted mt-1",style:{"font-size":"12px"}},m=o(()=>Object(c["createElementVNode"])("br",null,null,-1)),j=o(()=>Object(c["createElementVNode"])("span",{class:""},"Maximum size 2mb per file",-1)),O=o(()=>Object(c["createElementVNode"])("input",{type:"file",id:"dropzoneFile",multiple:"",class:"dropzoneFile"},null,-1));var p={__name:"DropZone",setup(e){const t=Object(c["ref"])(!1),l=()=>{t.value=!t.value};return(e,o)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",a,[Object(c["createElementVNode"])("div",{onDragenter:Object(c["withModifiers"])(l,["prevent"]),onDragleave:Object(c["withModifiers"])(l,["prevent"]),onDragover:o[0]||(o[0]=Object(c["withModifiers"])(()=>{},["prevent"])),onDrop:Object(c["withModifiers"])(l,["prevent"]),class:Object(c["normalizeClass"])([{"active-dropzone":t.value},"dropzone"])},[Object(c["createElementVNode"])("label",r,[Object(c["createElementVNode"])("div",s,[d,i,b,Object(c["createElementVNode"])("div",u,[Object(c["renderSlot"])(e.$slots,"format",{},()=>[Object(c["createTextVNode"])("PDF only")]),m,Object(c["renderSlot"])(e.$slots,"limit",{},()=>[j])]),Object(c["renderSlot"])(e.$slots,"input",{},()=>[O])])])],42,n)]))}},v=(l("8b61"),l("6b0d")),f=l.n(v);const h=f()(p,[["__scopeId","data-v-40716f28"]]);t["a"]=h},b811:function(e,t,l){},baac:function(e,t,l){},bcea:function(e,t,l){"use strict";l("b811")},cfe9:function(e,t,l){"use strict";l("baac")},e356:function(e,t,l){}}]);
//# sourceMappingURL=locker.5842f575.js.map